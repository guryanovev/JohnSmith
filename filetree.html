<!DOCTYPE html><head><title>JohnSmith Framework - File System Tree</title><meta charset="UTF-8"><!--[if lt IE 9]><script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><link rel="stylesheet" href="assets/styles/googlecode.css"><link rel="stylesheet" href="assets/styles/samples_hub.css"><link rel="stylesheet" href="assets/styles/tooltipster.css"><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,700" type="text/css"><style type="text/css">#result #destination #fileTree #treeRoot
{
    margin-bottom: 0;
}

#fileTree #treeRoot ul
{
    padding-left: 5px;
    margin-bottom: 0.5em;
    margin-top: 0.5em;
}

#fileTree ul li
{
    font-size: 12px;
    font-weight: 700;
    padding-left: 20px;
    margin-bottom: 0.5em;
    margin-top: 0.5em;
    background: url(assets/images/file.png) no-repeat 0 0;
}

#fileTree ul li.directory
{
    background: url(assets/images/folder.png) no-repeat 0 0;
}

#fileTree ul li a
{
    color: #000000;
    text-decoration: none;
}

#fileTree ul li a:hover
{
    text-decoration: underline;
}
</style><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script src="john-smith.debug.js"></script><script src="assets/scripts/highlight.pack.js"></script><script src="assets/scripts/jquery.tooltipster.min.js"></script><script src="assets/scripts/samples_hub.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-41108809-1', 'john-smith-js.com');
ga('send', 'pageview');</script></head><html><body id="application"><header id="mainHeader"><div class="appContent"><div class="container"><img id="johnSmith" src="assets/images/john_head_small.png"><div id="links"><a href="https://github.com/guryanovev/JohnSmith"><img src="assets/images/github.png"></a></div><div id="logo"><span>JohnSmith</span>&nbsp;Samples Hub</div></div></div></header><section id="page" class="appContent"><div itemscope itemtype="http://schema.org/Article" class="container"><header id="contentHeader"><h1 itemprop="name">File System Tree</h1></header><nav id="mainNavigation"><div class="content"><a id="prevLink" href="index.html" title="Previous sample: User Greeter">&lt;</a><a id="nextLink" href="static_binding.html" title="Next sample: Static value binding">&gt;</a><a id="browseAll" href="#"><span>Browse all</span></a></div><div class="bg"><span class="left"></span><span class="right"></span><span class="center"><span></span></span></div></nav><section id="source" class="fullHeight"><section id="javaScript"><header>JavaScript</header><section class="sourceContent"><pre><code class="javascript">/*
 * Model
 *   model is a primary application
 *   state storage */

var FILE = &quot;file&quot;;
var DIRECTORY = &quot;directory&quot;;

var File = function(name, type, children){
    this.name = name;
    this.type = type;
    this.children = children;
    this.isDirectory = type === DIRECTORY;
    this.parent = null;

    this.hasChildren = function(){
        if (this.children){
            return true;
        }
    };

    this.setParent = function(parent){
        this.parent = parent;
    };

    this.getFullPath = function(){
        if (this.parent === null) {
            return this.name;
        }

        return this.parent.getFullPath() + &quot;\\&quot; + this.name;
    };

    if (this.hasChildren()){
        for (var i = 0; i &lt; this.children.length; i++){
            this.children[i].setParent(this);
        }
    }
};

var FileSystem = function(){
    this._root = [
        new File(&quot;C:\\&quot;, DIRECTORY, [
            new File(&quot;Users&quot;, DIRECTORY, [
                new File(&quot;John Smith&quot;, DIRECTORY,[])
            ]),
            new File(&quot;Windows&quot;, DIRECTORY, []),
            new File(&quot;todo.txt&quot;, FILE, null)
        ]),
        new File(&quot;D:\\&quot;, DIRECTORY, [])
    ];

    this.getRoot = function(){
        return this._root;
    };
};

/*
 * ViewModel
 *    view model works with Model and
 *    adapts it's properties for View */

var FileViewModel = function(file){
    this.children = js.bindableList();
    this.name = file.name;
    this.isDirectory = file.isDirectory;

    if (file.hasChildren()) {
        for (var i = 0; i &lt; file.children.length; i++) {
            var child = file.children[i];
            var childViewModel = new FileViewModel(child);

            this.children.add(childViewModel);
        }
    }

    this.showFullPath = function(){
        alert(file.getFullPath());
    };
};

var FileSystemViewModel = function(fileSystem){
    this.fileTree = js.bindableList();

    this.initState = function(){
        var drives = fileSystem.getRoot();
        for (var i = 0; i &lt; drives.length; i++){
            var drive = drives[i];
            var driveViewModel = new FileViewModel(drive);

            this.fileTree.add(driveViewModel);
        }
    };
};

/*
 * View
 *    view consumes ViewModel bindable properties
 *    and wires it to the markup */

var FileView = function(){
    this.template =
        &quot;&lt;li class='item'&gt;&quot; +
            &quot;&lt;a href='#' class='name'&gt;&lt;/a&gt;&quot; +
            &quot;&lt;ul class='children'&gt;&lt;/ul&gt;&quot; +
        &quot;&lt;/li&gt;&quot;;

    this.init = function(view, fileViewModel){
        if (fileViewModel.isDirectory) {
            view.find(&quot;.item&quot;).addClass(&quot;directory&quot;);
        }

        view.bind(fileViewModel.name).to(&quot;.name&quot;);
        view.bind(fileViewModel.children).to(&quot;.children&quot;, FileView);

        view.on(&quot;a&quot;, &quot;click&quot;).react(fileViewModel.showFullPath);
    };
};

var FileTreeView = function(){
    this.template = &quot;#FileSystemTemplate&quot;;
    this.init = function(view, fileSystemViewModel){
        view.bind(fileSystemViewModel.fileTree).to(&quot;#treeRoot&quot;, FileView);
    };
};

/* Putting it all together */

var fileSystem = new FileSystem();
var fileSystemViewModel = new FileSystemViewModel(fileSystem);

js.renderView(FileTreeView, fileSystemViewModel).to(&quot;#fileTree&quot;);</code></pre></section></section><section id="html"><header>HTML</header><section class="sourceContent"><pre><code class="html">&lt;script id=&quot;FileSystemTemplate&quot; type=&quot;text/view&quot;&gt;
    &lt;p&gt;Click on item to view full path:&lt;/p&gt;
    &lt;ul id='treeRoot'&gt;
    &lt;/ul&gt;
&lt;/script&gt;

&lt;div id=&quot;fileTree&quot;&gt;&lt;/div&gt;</code></pre></section></section></section><section id="result" class="fullHeight"><section id="tableOfContents" style="height: 0"><div class="content"><ul class="navLevel0"><li><span>Home Page Samples</span><ul class="navLevel1"><li><a href="index.html" id="indexLink" class="topicLink ">User Greeter</a></li><li><a href="filetree.html" id="filetreeLink" class="topicLink selected">File System Tree</a></li></ul></li><li><span>Binding</span><ul class="navLevel1"><li><a href="static_binding.html" id="static_bindingLink" class="topicLink ">Static value binding</a></li><li><a href="dynamic_binding.html" id="dynamic_bindingLink" class="topicLink ">Dynamic value binding</a></li><li><a href="display_current_time.html" id="display_current_timeLink" class="topicLink ">Display current time</a></li><li><a href="viewModel.html" id="viewModelLink" class="topicLink ">View model</a></li><li><a href="custom_callback.html" id="custom_callbackLink" class="topicLink ">Using callback function</a></li><li><a href="bidirectionalBinding.html" id="bidirectionalBindingLink" class="topicLink ">Bidirectional binding</a></li></ul></li><li><span>Introducing view</span><ul class="navLevel1"><li><a href="view_simple.html" id="view_simpleLink" class="topicLink ">Simple vew</a></li><li><a href="view_init_state.html" id="view_init_stateLink" class="topicLink ">Using initState method</a></li><li><a href="view_use_for_bindable.html" id="view_use_for_bindableLink" class="topicLink ">Using a view for rendering bindable value</a></li></ul></li><li><span>List binding</span><ul class="navLevel1"><li><a href="view_use_for_list.html" id="view_use_for_listLink" class="topicLink ">Rendering bindable lists</a></li><li><a href="list_interactions.html" id="list_interactionsLink" class="topicLink ">List binding interaction</a></li><li><a href="list_size.html" id="list_sizeLink" class="topicLink ">Rendering list size</a></li></ul></li><li><span>Samples ported from another frameworks</span><ul class="navLevel1"><li><a href="knockout_hello_world.html" id="knockout_hello_worldLink" class="topicLink ">Knockout Hello World</a></li><li><a href="knockout_click_counter.html" id="knockout_click_counterLink" class="topicLink ">Knockout Click Counter</a></li><li><a href="react_seconds_elapsed.html" id="react_seconds_elapsedLink" class="topicLink ">React Seconds Elapsed</a></li></ul></li></ul></div></section><section id="tableOfContentsOverlay"></section><div class="scroller"><div id="description"><p>This example demonstrates rendering a composite UI markup using Views. It demonstrates a few points:</p>

<ul>
    <li>working with a bindable list</li>
    <li>creating composite list rendered with a single View class</li>
    <li>nesting Views using bind-to-view feature</li>
    <li>simple Model-ViewModel-View collaboration scenario</li>
</ul>

<p>
    Note how view rendering mechanism respects the scope of rendering.
    You can use relative jQuery selectors inside <code>init</code> method
    and these selectors will return the element within the relative view scope.
</p></div><h3>Result:</h3><div id="destination"><script id="FileSystemTemplate" type="text/view">
    <p>Click on item to view full path:</p>
    <ul id='treeRoot'>
    </ul>
</script>

<div id="fileTree"></div><script>(function(){/*
 * Model
 *   model is a primary application
 *   state storage */

var FILE = "file";
var DIRECTORY = "directory";

var File = function(name, type, children){
    this.name = name;
    this.type = type;
    this.children = children;
    this.isDirectory = type === DIRECTORY;
    this.parent = null;

    this.hasChildren = function(){
        if (this.children){
            return true;
        }
    };

    this.setParent = function(parent){
        this.parent = parent;
    };

    this.getFullPath = function(){
        if (this.parent === null) {
            return this.name;
        }

        return this.parent.getFullPath() + "\\" + this.name;
    };

    if (this.hasChildren()){
        for (var i = 0; i < this.children.length; i++){
            this.children[i].setParent(this);
        }
    }
};

var FileSystem = function(){
    this._root = [
        new File("C:\\", DIRECTORY, [
            new File("Users", DIRECTORY, [
                new File("John Smith", DIRECTORY,[])
            ]),
            new File("Windows", DIRECTORY, []),
            new File("todo.txt", FILE, null)
        ]),
        new File("D:\\", DIRECTORY, [])
    ];

    this.getRoot = function(){
        return this._root;
    };
};

/*
 * ViewModel
 *    view model works with Model and
 *    adapts it's properties for View */

var FileViewModel = function(file){
    this.children = js.bindableList();
    this.name = file.name;
    this.isDirectory = file.isDirectory;

    if (file.hasChildren()) {
        for (var i = 0; i < file.children.length; i++) {
            var child = file.children[i];
            var childViewModel = new FileViewModel(child);

            this.children.add(childViewModel);
        }
    }

    this.showFullPath = function(){
        alert(file.getFullPath());
    };
};

var FileSystemViewModel = function(fileSystem){
    this.fileTree = js.bindableList();

    this.initState = function(){
        var drives = fileSystem.getRoot();
        for (var i = 0; i < drives.length; i++){
            var drive = drives[i];
            var driveViewModel = new FileViewModel(drive);

            this.fileTree.add(driveViewModel);
        }
    };
};

/*
 * View
 *    view consumes ViewModel bindable properties
 *    and wires it to the markup */

var FileView = function(){
    this.template =
        "<li class='item'>" +
            "<a href='#' class='name'></a>" +
            "<ul class='children'></ul>" +
        "</li>";

    this.init = function(view, fileViewModel){
        if (fileViewModel.isDirectory) {
            view.find(".item").addClass("directory");
        }

        view.bind(fileViewModel.name).to(".name");
        view.bind(fileViewModel.children).to(".children", FileView);

        view.on("a", "click").react(fileViewModel.showFullPath);
    };
};

var FileTreeView = function(){
    this.template = "#FileSystemTemplate";
    this.init = function(view, fileSystemViewModel){
        view.bind(fileSystemViewModel.fileTree).to("#treeRoot", FileView);
    };
};

/* Putting it all together */

var fileSystem = new FileSystem();
var fileSystemViewModel = new FileSystemViewModel(fileSystem);

js.renderView(FileTreeView, fileSystemViewModel).to("#fileTree");}());</script></div><form id="sendToJsFiddle" action="http://jsfiddle.net/api/post/jquery/2.0/" method="POST" target="_blank"><input id="formJs" type="hidden" value="/*
 * Model
 *   model is a primary application
 *   state storage */

var FILE = &quot;file&quot;;
var DIRECTORY = &quot;directory&quot;;

var File = function(name, type, children){
    this.name = name;
    this.type = type;
    this.children = children;
    this.isDirectory = type === DIRECTORY;
    this.parent = null;

    this.hasChildren = function(){
        if (this.children){
            return true;
        }
    };

    this.setParent = function(parent){
        this.parent = parent;
    };

    this.getFullPath = function(){
        if (this.parent === null) {
            return this.name;
        }

        return this.parent.getFullPath() + &quot;\\&quot; + this.name;
    };

    if (this.hasChildren()){
        for (var i = 0; i &lt; this.children.length; i++){
            this.children[i].setParent(this);
        }
    }
};

var FileSystem = function(){
    this._root = [
        new File(&quot;C:\\&quot;, DIRECTORY, [
            new File(&quot;Users&quot;, DIRECTORY, [
                new File(&quot;John Smith&quot;, DIRECTORY,[])
            ]),
            new File(&quot;Windows&quot;, DIRECTORY, []),
            new File(&quot;todo.txt&quot;, FILE, null)
        ]),
        new File(&quot;D:\\&quot;, DIRECTORY, [])
    ];

    this.getRoot = function(){
        return this._root;
    };
};

/*
 * ViewModel
 *    view model works with Model and
 *    adapts it's properties for View */

var FileViewModel = function(file){
    this.children = js.bindableList();
    this.name = file.name;
    this.isDirectory = file.isDirectory;

    if (file.hasChildren()) {
        for (var i = 0; i &lt; file.children.length; i++) {
            var child = file.children[i];
            var childViewModel = new FileViewModel(child);

            this.children.add(childViewModel);
        }
    }

    this.showFullPath = function(){
        alert(file.getFullPath());
    };
};

var FileSystemViewModel = function(fileSystem){
    this.fileTree = js.bindableList();

    this.initState = function(){
        var drives = fileSystem.getRoot();
        for (var i = 0; i &lt; drives.length; i++){
            var drive = drives[i];
            var driveViewModel = new FileViewModel(drive);

            this.fileTree.add(driveViewModel);
        }
    };
};

/*
 * View
 *    view consumes ViewModel bindable properties
 *    and wires it to the markup */

var FileView = function(){
    this.template =
        &quot;&lt;li class='item'&gt;&quot; +
            &quot;&lt;a href='#' class='name'&gt;&lt;/a&gt;&quot; +
            &quot;&lt;ul class='children'&gt;&lt;/ul&gt;&quot; +
        &quot;&lt;/li&gt;&quot;;

    this.init = function(view, fileViewModel){
        if (fileViewModel.isDirectory) {
            view.find(&quot;.item&quot;).addClass(&quot;directory&quot;);
        }

        view.bind(fileViewModel.name).to(&quot;.name&quot;);
        view.bind(fileViewModel.children).to(&quot;.children&quot;, FileView);

        view.on(&quot;a&quot;, &quot;click&quot;).react(fileViewModel.showFullPath);
    };
};

var FileTreeView = function(){
    this.template = &quot;#FileSystemTemplate&quot;;
    this.init = function(view, fileSystemViewModel){
        view.bind(fileSystemViewModel.fileTree).to(&quot;#treeRoot&quot;, FileView);
    };
};

/* Putting it all together */

var fileSystem = new FileSystem();
var fileSystemViewModel = new FileSystemViewModel(fileSystem);

js.renderView(FileTreeView, fileSystemViewModel).to(&quot;#fileTree&quot;);" name="js"><input id="formHtml" type="hidden" value="&lt;script id=&quot;FileSystemTemplate&quot; type=&quot;text/view&quot;&gt;
    &lt;p&gt;Click on item to view full path:&lt;/p&gt;
    &lt;ul id='treeRoot'&gt;
    &lt;/ul&gt;
&lt;/script&gt;

&lt;div id=&quot;fileTree&quot;&gt;&lt;/div&gt;" name="html"><input type="hidden" value="d" name="wrap"><input type="hidden" value="http://john-smith-js.com/john-smith.debug.js" name="resources"><input id="sendButton" type="submit" value="Open in jsFiddle"></form></div></section></div></section><footer id="mainFooter" class="appContent"><div class="container"><section id="ci"><a href="https://travis-ci.org/guryanovev/JohnSmith" title="Travis CI Build Status"><img src="https://travis-ci.org/guryanovev/JohnSmith.png" alt="Build Status"></a></section><section class="info">v2.1.1.152</section><section id="footerLinks">Get JohnSmith:&nbsp;<a href="john-smith-2.1.1.152.min.js">Download Minified</a><span>&nbsp;|&nbsp;</span><a href="john-smith-2.1.1.152.debug.js">Download Debug</a><span>&nbsp;|&nbsp;</span><a href="http://www.nuget.org/packages/JohnSmith/">NuGet package</a></section></div></footer><script>$(function(){
    runApplication();
    //hljs.initHighlightingOnLoad();
    $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
    //setTimeout(function(){
        $('.codeAnnotation').tooltipster({
            maxWidth: 300,
            position: 'right'
        });
    //}, 3000);
});</script></body></html>