'use strict';var JohnSmith;
(function(c){(function(f){var e=function(){function b(){}b.isFunction=function(a){var g={};return a&&"[object Function]"===g.toString.call(a)};b.isObject=function(a){return null!=a&&"object"===typeof a};return b}();f.TypeUtils=e;e=function(){function b(){}b.removeItem=function(a,g){for(var d=-1,b=0;b<a.length;b++)a[b]===g&&(d=b);0<=d&&a.splice(d,1)};return b}();f.ArrayUtils=e;e=function(){function b(a){this._processors=a}b.prototype.processArguments=function(a,g){var d=a[a.length-1];this.isOptionsArgument(d)?
a.pop():d={};for(var b=0;0<a.length;)this.processHandlerArgument(a[0],b,d,g),a.splice(0,1),b++;return d};b.prototype.processHandlerArgument=function(a,g,d,b){for(var c=0;c<this._processors.length;c++){var e=this._processors[c];if(e.canProcess(a,g,d,b)){e.process(a,d,b);return}}throw Error("Could not process argument "+a);};b.prototype.isOptionsArgument=function(a){return c.Common.TypeUtils.isObject(a)};return b}();f.ArgumentProcessorsBasedHandler=e;f.log={info:function(){for(var b=0;b<arguments.length-
0;b++);},warn:function(){for(var b=0;b<arguments.length-0;b++);},error:function(){for(var b=0;b<arguments.length-0;b++);}};e=function(){function b(){this._listeners=[]}b.prototype.addListener=function(a,g){this._listeners.push({eventType:a,callback:g})};b.prototype.trigger=function(a,g){for(var d=this._listeners.length,b=0;b<d;b++){var c=this._listeners[b];c.eventType===a&&c.callback(g)}};return b}();f.DefaultEventBus=e;e=function(){function b(){}b.text="text";b.html="html";b.unknown="unknown";return b}();
f.ValueType=e})(c.Common||(c.Common={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var e=function(){function b(a,g){this._command=a;this._cause=g}b.prototype.init=function(){this._cause.wireWith(this._command)};b.prototype.dispose=function(){this._cause.dispose()};return b}();c.CommandWire=e;e=function(){function b(a,g,d,b){this._causeData=a;this._commandManager=g;this._context=d;this._commandContext=b;this._wires=[]}b.prototype.react=function(a,g){var d=this._commandManager.setUpBinding({command:a,context:this._context,causeData:this._causeData,commandContext:g||
this._commandContext||null});this._wires.push(d);d.init();return this};b.prototype.dispose=function(){for(var a=0;a<this._wires.length;a++)this._wires[a].dispose()};return b}();c.CommandConfig=e})(c.Command||(c.Command={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){(function(b){b[b.replace=0]="replace";b[b.add=1]="add";b[b.remove=2]="remove"})(c.DataChangeReason||(c.DataChangeReason={}));var e=function(){function b(a,g){this._bindable=a;this._handler=g}b.prototype.init=function(){this._handler.wireWith(this._bindable)};b.prototype.dispose=function(){this._handler.unwireWith(this._bindable);this._handler.dispose()};b.prototype.getBindable=function(){return this._bindable};b.prototype.getHandler=function(){return this._handler};return b}();
c.BindingWire=e;e=function(){function b(a,g,d,b,c){this._manager=a;this._bindable=g;this._context=d;this._commandHost=b;this._wires=[];this._initImmediately=c}b.prototype.to=function(){for(var a=[],g=0;g<arguments.length-0;g++)a[g]=arguments[g+0];a=this._manager.bind({bindableData:this._bindable,handlerData:a,context:this._context,commandHost:this._commandHost});this._wires.push(a);this._initImmediately&&a.init();return this};b.prototype.init=function(){for(var a=0;a<this._wires.length;a++)this._wires[a].init()};
b.prototype.dispose=function(){for(var a=0;a<this._wires.length;a++)this._wires[a].dispose()};return b}();c.BindingConfig=e})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var e=function(){function b(){this._listeners=[]}b.prototype.getValue=function(){return this._value};b.prototype.setValue=function(a){this.notifyListeners(a,0);this._value=a};b.prototype.addListener=function(a){this._listeners.push(a)};b.prototype.removeListener=function(a){for(var g=-1,d=0;d<this._listeners.length;d++)this._listeners[d]==a&&(g=d);0<=g&&this._listeners.splice(g,1)};b.prototype.getListenersCount=function(){return this._listeners.length};b.prototype.getListener=
function(a){return this._listeners[a]};b.prototype.notifyListeners=function(a,g){for(var d=0;d<this._listeners.length;d++)this._listeners[d].valueChanged(this._value,a,g)};b.prototype.hasValue=function(){return null==this._value||void 0==this._value?!1:!0};return b}();c.BindableValue=e})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
var __extends=this.__extends||function(c,f){function e(){this.constructor=c}for(var b in f)f.hasOwnProperty(b)&&(c[b]=f[b]);e.prototype=f.prototype;c.prototype=new e};
(function(c){(function(f){var e=function(b){function a(){b.call(this);b.prototype.setValue.call(this,[])}__extends(a,b);a.prototype.setValue=function(a){if(a&&!(a instanceof Array))throw Error("Bindable list supports only array values");b.prototype.setValue.call(this,a);this.notifyCountListeners()};a.prototype.add=function(){for(var a=[],d=0;d<arguments.length-0;d++)a[d]=arguments[d+0];for(var d=this.getValue(),b=0;b<a.length;b++)d.push(a[b]);this.reactOnChange(a,1)};a.prototype.remove=function(){for(var a=
[],d=0;d<arguments.length-0;d++)a[d]=arguments[d+0];for(var d=this.getValue(),b=0;b<a.length;b++){for(var c=-1,e=0;e<d.length;e++)d[e]==a[b]&&(c=e);0<=c&&d.splice(c,1)}this.reactOnChange(a,2)};a.prototype.clear=function(){var a=this.getValue().splice(0,this.getValue().length);this.reactOnChange(a,2)};a.prototype.count=function(){this._count||(this._count=new c.Binding.BindableValue);return this._count};a.prototype.forEach=function(a,d){this.getValue().forEach(a,d)};a.prototype.reactOnChange=function(a,
d){b.prototype.notifyListeners.call(this,a,d);this.notifyCountListeners()};a.prototype.notifyCountListeners=function(){this._count&&(this.getValue()?this._count.setValue(this.getValue().length):this._count.setValue(0))};return a}(c.Binding.BindableValue);f.BindableList=e})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var e=function(){function b(a){this._value=a}b.prototype.getValue=function(){return this._value};b.prototype.addListener=function(a){};b.prototype.removeListener=function(a){};return b}();c.StaticBindableValue=e})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(f){var e=function(b){function a(a,d){b.call(this,d);this._handlerFactories=a}__extends(a,b);a.prototype.bind=function(a){var d=this.getBindable(a.bindableData);a=this.getHandler(a.handlerData,d,a.context,a.commandHost);return new c.Binding.BindingWire(d,a)};a.prototype.getBindable=function(a){return a&&a.getValue&&a.addListener?a:new c.Binding.StaticBindableValue(a)};a.prototype.getHandler=function(a,d,b,c){for(var e=this.processArguments(a,b),f=0;f<this._handlerFactories.length;f++){var h=
this._handlerFactories[f].createHandler(e,d,b,c);if(h)return h}throw Error("Could not transform object "+a+" to bindable handler");};return a}(c.Common.ArgumentProcessorsBasedHandler);f.DefaultBindingManager=e;e=function(){function b(){}b.prototype.createHandler=function(a,b,d,c){return a&&a.wireWith&&a.unwireWith?a:null};return b}();f.ManualHandlerFactory=e})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(f){var e=function(){function b(a){this._callback=a}b.prototype.wireWith=function(a){a.addListener(this);this.invokeCallback(null,a.getValue(),0)};b.prototype.unwireWith=function(a){a.removeListener(this)};b.prototype.valueChanged=function(a,b,d){this.invokeCallback(a,b,d)};b.prototype.invokeCallback=function(a,b,d){this._callback.call(window,b,a,d)};b.prototype.dispose=function(){};return b}();f.CallbackHandler=e;e=function(){function b(){}b.prototype.canProcess=function(a,
b,d,k){return 0==b&&(null==d.handler||"callback"==d.handler)&&null==d.callback&&c.Common.TypeUtils.isFunction(a)};b.prototype.process=function(a,b,d){b.handler="callback";b.callback=a};return b}();f.CallbackArgumentProcessor=e;e=function(){function b(){}b.prototype.createHandler=function(a,b,d,k){return a&&"callback"===a.handler?new c.Binding.CallbackHandler(a.callback):null};return b}();f.CallbackHandlerFactory=e})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(f){var e=function(b){function a(a,d){b.call(this);this._dependencies=d;this._evaluateValue=a;this._dependencyValues=[];this._allDependencies=[];for(var c=0;c<d.length;c++){var e=d[c];this.setupDependencyListener(e);this._dependencyValues[c]=e.getValue()}}__extends(a,b);a.prototype.setupDependencyListener=function(a){for(var d=0;d<this._allDependencies.length;d++)if(this._allDependencies[d]===a)return;this._allDependencies.push(a);var b=this;a.addListener({valueChanged:function(d,
c,e){d=c;0!==e&&(d=a.getValue());b.notifyDependentListeners(a,d)}})};a.prototype.getValue=function(){return this._evaluateValue.apply(this,this._dependencyValues)};a.prototype.setValue=function(a){throw Error("Could not set dependent value");};a.prototype.notifyDependentListeners=function(a,d){for(var b=this.getValue(),c=0;c<this._dependencies.length;c++)this._dependencies[c]===a&&(this._dependencyValues[c]=d);for(var e=this.getValue(),c=0;c<this.getListenersCount();c++)this.getListener(c).valueChanged(b,
e,0)};return a}(c.Binding.BindableValue);f.DependentValue=e})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var e=function(){function a(){}a.Value="value";a.CheckedAttribute="checkedAttribute";return a}();c.FetcherType=e;var b=function(){function a(){}a.prototype.isSuitableFor=function(a){var d=a.getNodeName();return d&&(d=d.toUpperCase(),"TEXTAREA"===d||"SELECT"===d||"INPUT"===d&&(a=a.getAttribute("type"),!a||"TEXT"===a.toUpperCase()))?!0:!1};a.prototype.valueToElement=function(a,d){d.setValue(a)};a.prototype.valueFromElement=function(a){return a.getValue()};return a}(),a=function(){function a(){}
a.prototype.isSuitableFor=function(a){var d=a.getNodeName();return d?(d=d.toUpperCase(),a=a.getAttribute("type"),"INPUT"===d&&a&&"CHECKBOX"===a.toUpperCase()):!1};a.prototype.valueToElement=function(a,d){d.setProperty("checked",a)};a.prototype.valueFromElement=function(a){var d=!1;a.getProperty("checked")&&(d=!0);return d};return a}(),g=function(){function a(){this._items={}}a.prototype.getForElement=function(a){for(var d in this._items){var b=this._items[d];if(b.isSuitableFor(a))return b}return null};
a.prototype.getByKey=function(a){return this._items[a]};a.prototype.registerFetcher=function(a,d){this._items[a]=d;return this};return a}();c.factory=(new g).registerFetcher(e.Value,new b).registerFetcher(e.CheckedAttribute,new a)})(c.Fetchers||(c.Fetchers={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(f){var e=function(){function b(){this._listeners=[]}b.prototype.listen=function(a){var b=this;this._listeners.push(a);return{dispose:function(){b.removeListener(a)}}};b.prototype.trigger=function(a){for(var b=0;b<this._listeners.length;b++)this._listeners[b](a)};b.prototype.dispose=function(){this._listeners=null};b.prototype.getListenersCount=function(){return null===this._listeners?0:this._listeners.length};b.prototype.hasListeners=function(){return 0<this.getListenersCount()};
b.prototype.removeListener=function(a){c.Common.ArrayUtils.removeItem(this._listeners,a)};return b}();f.Event=e})(c.Events||(c.Events={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(f){var e=function(){function b(a,b,d,k,e,f,l,h){this._bindableManager=a;this._commandManager=b;this._elementFactory=d;this._data=k;this._viewModel=e;this._eventBus=f;this._viewFactory=l;this._markupResolver=h;this._bindings=[];this._commands=[];this._unrender=new c.Events.Event}b.prototype.find=function(a){return this.getRootElement().findRelative(a)};b.prototype.addChild=function(a,b,d){this.hasChildren()||(this._children=[]);this._children.push({child:b,destination:a,viewModel:d})};
b.prototype.attachTo=function(a){a="string"==typeof a?this._elementFactory.createElement(a):a;this.attachViewToRoot(a)};b.prototype.renderTo=function(a){var b=this._markupResolver.resolve(this._data.template);a=("string"==typeof a?this._elementFactory.createElement(a):a).appendHtml(b);this.attachViewToRoot(a)};b.prototype.onUnrender=function(){return this._unrender};b.prototype.attachViewToRoot=function(a){this._rootElement=a;this._eventBus.trigger("viewRendered",{root:this._rootElement,view:this});
this._data.init&&this._data.init(this,this._viewModel);for(a=0;a<this._bindings.length;a++)this._bindings[a].init();if(this.hasChildren())for(a=0;a<this._children.length;a++){var b=this._children[a];this._viewFactory.resolve(b.child,b.viewModel).renderTo(this._rootElement.findRelative(b.destination))}this._viewModel&&this._viewModel.initState&&this._viewModel.initState()};b.prototype.bind=function(a){a=new c.Binding.BindingConfig(this._bindableManager,a,this._rootElement,this,!1);this._bindings.push(a);
return a};b.prototype.on=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];a=new c.Command.CommandConfig(a,this._commandManager,this.getRootElement(),this._viewModel);this._commands.push(a);return a};b.prototype.getRootElement=function(){return this._rootElement};b.prototype.unrenderView=function(){this._unrender.hasListeners()?this._unrender.trigger(this):this.getRootElement().remove()};b.prototype.dispose=function(){this.unrenderView();this._viewModel&&this._viewModel.releaseState&&
this._viewModel.releaseState();if(this.hasChildren())for(var a=0;a<this._children.length;a++)this._children[a].child.dispose();for(a=0;a<this._bindings.length;a++)this._bindings[a].dispose();for(a=0;a<this._commands.length;a++)this._commands[a].dispose()};b.prototype.hasChildren=function(){return null!=this._children};return b}();f.DefaultView=e})(c.View||(c.View={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(f){var e=function(){function b(a,b,d,c,e){this._bindableManager=a;this._commandManager=b;this._elementFactory=d;this._eventBus=c;this._markupResolver=e}b.prototype.resolve=function(a,b){if(!a)throw Error("Expected view data object was not defined");if(c.Common.TypeUtils.isFunction(a)){var d=new a;return this.resolve(d,b)}if(a.template)return new c.View.DefaultView(this._bindableManager,this._commandManager,this._elementFactory,a,b,this._eventBus,this,this._markupResolver);if(a.renderTo&&
a.getRootElement)return a;throw Error("Could not resolve view data by provided descriptor");};return b}();f.DefaultViewFactory=e})(c.View||(c.View={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var e=function(){function b(a){this._viewFactory=a}b.prototype.canProcess=function(a,b,d,c){return 1===b&&!d.view};b.prototype.process=function(a,b,d){try{this._viewFactory.resolve(a,null),b.view=a}catch(c){}};return b}();c.ViewArgumentProcessor=e;e=function(){function b(a,b){this._viewFactory=a;this._viewDescriptor=b}b.prototype.render=function(a,b){var d=this._viewFactory.resolve(this._viewDescriptor,a);d.renderTo(b);return{element:d.getRootElement(),dispose:function(){d.dispose()},
unrender:function(){d.unrenderView()}}};return b}();c.ViewValueRenderer=e})(c.View||(c.View={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var e=function(){function a(a){this._formatter=a}a.prototype.render=function(a,b){var c=this._formatter.format(a);return{element:this.doRender(c,b),dispose:function(){this.element.remove()}}};a.prototype.doRender=function(a,b){return null};return a}();c.RendererBase=e;var b=function(a){function b(d){a.call(this,d)}__extends(b,a);b.prototype.doRender=function(a,b){return b.appendText(a)};return b}(e);c.TextRenderer=b;b=function(a){function b(d){a.call(this,d)}__extends(b,
a);b.prototype.doRender=function(a,b){return b.appendHtml(a)};return b}(e);c.HtmlRenderer=b;e=function(a){function b(d,c){a.call(this,d);this._markupResolver=c}__extends(b,a);b.prototype.doRender=function(a,b){var c=this._markupResolver.resolve(a);return b.appendHtml(c)};return b}(e);c.ResolvableMarkupRenderer=e;e=function(){function a(a){this._fetcher=a}a.prototype.render=function(a,b){this._fetcher.valueToElement(a,b);return{element:b,dispose:function(){}}};return a}();c.FetcherToRendererAdapter=
e})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(f){var e=function(){function a(b,c){this._contentDestination=b;this._valueRenderer=c}a.prototype.wireWith=function(a){this.doRender(a.getValue());a.addListener(this)};a.prototype.unwireWith=function(a){a.removeListener(this)};a.prototype.valueChanged=function(a,b,c){this.doRender(b)};a.prototype.dispose=function(){this.disposeCurrentValue()};a.prototype.doRender=function(a){this.disposeCurrentValue();null!==a&&void 0!==a&&(this._currentValue=this._valueRenderer.render(a,this._contentDestination))};
a.prototype.disposeCurrentValue=function(){this._currentValue&&this._currentValue.dispose()};return a}();f.RenderValueHandler=e;var b=function(){function b(a,c,g,e){this._destinationFactory=a;this._markupResolver=c;this._viewFactory=g;this._fetcherFactory=e}b.prototype.fillContentDestination=function(a,b){a.contentDestination||(a.contentDestination=null==b?this._destinationFactory.createElement(a.to):b.findRelative(a.to))};b.prototype.fillRenderer=function(b,g,e){if(!b.renderer)if(b.view)b.renderer=
new c.View.ViewValueRenderer(this._viewFactory,b.view);else{if(!b.valueType){var f=!0;void 0!==b.encode&&(f=b.encode);b.valueType=f?c.Common.ValueType.text:c.Common.ValueType.html}b.formatter||(b.formatter=new a);b.renderer=this.getRenderer(b,g,e)}};b.prototype.getRenderer=function(a,b,g){var e=null;if(a.fetch){if(e=this._fetcherFactory.getByKey(a.fetch),!e)throw Error("Fetcher "+a.fetch+" not found");}else e=this._fetcherFactory.getForElement(a.contentDestination);if(e){if(!1!==a.bidirectional){var f=
a.command,h=a.commandContext,m=a.event||"change";!f&&g.setValue&&(f=g.setValue,h=g);f&&b.on(a.to,m).react(f,h)}return new c.Binding.FetcherToRendererAdapter(e)}switch(a.valueType){case c.Common.ValueType.text:return new c.Binding.TextRenderer(a.formatter);case c.Common.ValueType.html:return new c.Binding.HtmlRenderer(a.formatter);case c.Common.ValueType.unknown:return new c.Binding.ResolvableMarkupRenderer(a.formatter,this._markupResolver);default:throw Error("Unknown value type: "+a.valueType);}};
b.prototype.isList=function(a){return a instanceof c.Binding.BindableList||a&&a.getValue()instanceof Array?!0:!1};return b}();f.RenderHandlerFactoryBase=b;b=function(a){function b(d,c,e,f){a.call(this,d,c,e,f)}__extends(b,a);b.prototype.createHandler=function(a,b,d,c){if(!a||a.handler&&"render"!==a.handler||a.type&&"value"!==a.type||!a.type&&this.isList(b))return null;this.fillContentDestination(a,d);this.fillRenderer(a,c,b);return new e(a.contentDestination,a.renderer)};return b}(b);f.RenderValueFactory=
b;var a=function(){function a(){}a.prototype.format=function(a){return a.toString()};return a}();f.DefaultFormatter=a})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(f){var e=function(){function a(a,b){this._contentDestination=a;this._valueRenderer=b;this._renderedValues=[]}a.prototype.wireWith=function(a){this.doRender(a.getValue(),0);a.addListener(this)};a.prototype.unwireWith=function(a){a.removeListener(this)};a.prototype.valueChanged=function(a,b,c){this.doRender(b,c)};a.prototype.dispose=function(){for(var a=0;a<this._renderedValues.length;a++)this._renderedValues[a].renderedValue.dispose&&this._renderedValues[a].renderedValue.dispose()};
a.prototype.findRenderedValue=function(a){for(var b=0;b<this._renderedValues.length;b++)if(this._renderedValues[b].value===a)return this._renderedValues[b].renderedValue;return null};a.prototype.removeRenderedValue=function(a){for(var b=-1,c=0;c<this._renderedValues.length;c++)this._renderedValues[c].renderedValue===a&&(b=c);0<=b&&this._renderedValues.splice(b,1)};a.prototype.doRender=function(a,b){if(2==b)for(var c=0;c<a.length;c++){var e=this.findRenderedValue(a[c]);e&&(e.dispose(),this.removeRenderedValue(e))}else 1!=
b&&(this._renderedValues=[],this._contentDestination.empty()),this.appendItems(a)};a.prototype.appendItems=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b],e=this._valueRenderer.render(c,this._contentDestination);this._renderedValues.push({value:c,renderedValue:e})}};return a}();f.RenderListHandler=e;var b=function(a){function b(c,e,g,f){a.call(this,c,e,g,f)}__extends(b,a);b.prototype.createHandler=function(a,b,c,g){if(!a||a.handler&&"render"!==a.handler||a.type&&"list"!==a.type||!a.type&&
!this.isList(b))return null;this.fillContentDestination(a,c);this.fillRenderer(a,g,b);return new e(a.contentDestination,a.renderer)};return b}(c.Binding.RenderHandlerFactoryBase);f.RenderListFactory=b})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(f){var e=function(){function a(b,c,e,g){this._targetElement=b;this._event=c;this._commandContext=e;this._argumentsFetcher=g}a.prototype.wireWith=function(a){var b=this._commandContext,c=this._argumentsFetcher;this._handlerRef=this._targetElement.attachEventHandler(this._event,function(e){e=null==c?[]:c.fetch(e);a.execute.apply(b,e)})};a.prototype.dispose=function(){this._targetElement.detachEventHandler(this._event,this._handlerRef)};return a}();f.EventCommandCause=e;var b=
function(){function a(b){this._fetcher=b}a.prototype.fetch=function(a){return[this._fetcher.valueFromElement(a)]};return a}(),a=function(a){function d(b,c,d){a.call(this,b);this._elementFactory=c;this._fetcherFactory=d}__extends(d,a);d.prototype.setUpBinding=function(a){var b=this.getCommand(a.command);a.commandContext||(a.commandContext=b);a=this.getCause(a.causeData,a.context,a.commandContext);return new c.Command.CommandWire(b,a)};d.prototype.getCommand=function(a){if(c.Common.TypeUtils.isFunction(a))return{execute:a};
if(a.execute)return a;throw Error("Could not transform "+a+" to command object");};d.prototype.getCause=function(a,b,c){a=this.processArguments(a,b);return this.getCauseByOptions(a,b,c)};d.prototype.getCauseByOptions=function(a,c,d){if(!a.to)throw Error("Required option 'to' is not set!");if(!a.event)throw Error("Required option 'event' is not set!");c=null==c?this._elementFactory.createElement(a.to):c.findRelative(a.to);if(!a.argumentsFetcher){var g=null;if(g=a.fetch?this._fetcherFactory.getByKey(a.fetch):
this._fetcherFactory.getForElement(c))a.argumentsFetcher=new b(g)}return new e(c,a.event,d,a.argumentsFetcher)};return d}(c.Common.ArgumentProcessorsBasedHandler);f.DefaultCommandManager=a})(c.Command||(c.Command={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var e=function(){function b(){}b.prototype.canProcess=function(a,b,c,e){return"string"==typeof a&&1==b};b.prototype.process=function(a,b,c){b.event=a};return b}();c.EventArgumentProcessor=e})(c.Command||(c.Command={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var e=function(){function b(a){this._target=a}b.prototype.isEmpty=function(){return 0==this._target.length};b.prototype.empty=function(){this._target.empty()};b.prototype.appendHtml=function(a){if(!a)throw Error("Could not append empty string!");if("string"!==typeof a)throw Error("Expected string markup but was"+a);a=$($.parseHTML(a));this._target.append(a);return new b(a)};b.prototype.appendText=function(a){if(void 0===a||null==a)throw Error("Could not append null object!");
if("string"!==typeof a)throw Error("Expected string text but was"+a);if(""===a)return this.getTarget().empty(),this;a=$("<div/>").text(a).html();return this.appendHtml(a)};b.prototype.getHtml=function(){return this._target.html()};b.prototype.getNodeName=function(){return 1==this._target.length?this._target[0].nodeName:null};b.prototype.findRelative=function(a){var c=this._target.filter(a);0==c.length&&(c=this._target.find(a));return new b(c)};b.prototype.remove=function(){this._target.remove()};
b.prototype.getTarget=function(){return this._target};b.prototype.setText=function(a){this._target.text(a)};b.prototype.setHtml=function(a){this._target.html(a)};b.prototype.addClass=function(a){this._target.addClass(a)};b.prototype.removeClass=function(a){this._target.removeClass(a)};b.prototype.attachClickHandler=function(a){this._target.click(a)};b.prototype.attachEventHandler=function(a,c){var d=function(){c(new b($(this)));return!1};this._target.on(a,d);return d};b.prototype.detachEventHandler=
function(a,b){this._target.off(a,b)};b.prototype.getValue=function(){return this._target.val()};b.prototype.setValue=function(a){return this._target.val(a)};b.prototype.getAttribute=function(a){return this._target.attr(a)};b.prototype.setAttribute=function(a,b){this._target.attr(a,b)};b.prototype.getProperty=function(a){return this._target.prop(a)};b.prototype.setProperty=function(a,b){this._target.prop(a,b)};return b}();c.JQueryElement=e;e=function(){function b(){}b.prototype.resolve=function(a){var b;
if(a instanceof jQuery)b=a;else try{b=$(a)}catch(c){return a}if(0<b.parent().length)return b.html();if("string"===typeof a)return a;if(a instanceof jQuery)return $("<p>").append(a).html();throw Error("Could not resolve markup by object "+a);};return b}();c.JQueryMarkupResolver=e;e=function(){function b(){}b.prototype.canProcess=function(a,b,c,e){return"string"==typeof a&&0==b};b.prototype.process=function(a,b,c){b.to||(b.to=a)};return b}();c.JQueryTargetArgumentProcessor=e})(c.JQuery||(c.JQuery={}))})(JohnSmith||
(JohnSmith={}));
(function(c){(function(f){var e=function(){function b(a,b,c,e){this._bindableManager=a;this._commandManager=b;this._viewFactory=c;this.event={bus:e}}b.prototype.bindableValue=function(){return new c.Binding.BindableValue};b.prototype.bindableList=function(){return new c.Binding.BindableList};b.prototype.dependentValue=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];for(var b=[],d=0;d<a.length-1;d++)b.push(a[d]);return new c.Binding.DependentValue(a[a.length-1],b)};b.prototype.bind=
function(a){return new c.Binding.BindingConfig(this._bindableManager,a,null,this,!0)};b.prototype.on=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return new c.Command.CommandConfig(a,this._commandManager,null)};b.prototype.createView=function(a,b){return this._viewFactory.resolve(a,b)};b.prototype.renderView=function(a,b){var c=this._viewFactory.resolve(a,b);return{to:function(a){c.renderTo(a)}}};b.prototype.attachView=function(a,b){var c=this._viewFactory.resolve(a,b);
return{to:function(a){c.attachTo(a)}}};return b}();f=function(){function b(){this._handlerFactories=[];this._handlerArgumentProcessors=[];this._commandCauseArgumentProcessors=[]}b.prototype.configure=function(){var a=new c.Common.DefaultEventBus;this.createDependencies(a);return new e(this._bindableManager,this._commandManager,this._viewFactory,a)};b.prototype.createDependencies=function(a){this._elementFactory={createElement:function(a){return new c.JQuery.JQueryElement($(a))}};this._fetcherFactory=
c.Fetchers.factory;this._commandManager=new c.Command.DefaultCommandManager(this._commandCauseArgumentProcessors,this._elementFactory,this._fetcherFactory);this._markupResolver=new c.JQuery.JQueryMarkupResolver;this._commandCauseArgumentProcessors.push(new c.Command.EventArgumentProcessor);this._commandCauseArgumentProcessors.push(new c.JQuery.JQueryTargetArgumentProcessor);this._bindableManager=new c.Binding.DefaultBindingManager(this._handlerFactories,this._handlerArgumentProcessors);this._viewFactory=
new c.View.DefaultViewFactory(this._bindableManager,this._commandManager,this._elementFactory,a,this._markupResolver);this._handlerFactories.push(new c.Binding.ManualHandlerFactory);this._handlerFactories.push(new c.Binding.CallbackHandlerFactory);this._handlerFactories.push(new c.Binding.RenderListFactory(this._elementFactory,this._markupResolver,this._viewFactory,this._fetcherFactory));this._handlerFactories.push(new c.Binding.RenderValueFactory(this._elementFactory,this._markupResolver,this._viewFactory,
this._fetcherFactory));this._handlerArgumentProcessors.push(new c.Binding.CallbackArgumentProcessor);this._handlerArgumentProcessors.push(new c.JQuery.JQueryTargetArgumentProcessor);this._handlerArgumentProcessors.push(new c.View.ViewArgumentProcessor(this._viewFactory))};return b}();window[window.JohnSmithAcronym||"js"]=(new f).configure()})(c.Api||(c.Api={}))})(JohnSmith||(JohnSmith={}));
